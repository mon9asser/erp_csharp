invoice_number
payment_methods
datemade
enable_vat
details
total_without_vat
discount
vat_amount
total_with_vat



newInvoiceBtn
deleteInvoiceBtn
editInvoiceBtn
printInvoiceBtn
storeInvoiceBtn



 public string get_proc_name(int type, string action, string action_param ) {
            
            string invoice_type = "Sales";

            if (type == 0)
            {
                invoice_type = "Sales";
            }
            else if (type == 1) {
                invoice_type = "Purchase";
            }
            else if (type == 2)
            {
                invoice_type = "Return_Purchase";
            }
            else if (type == 3)
            {
                invoice_type = "Return_Sales";
            }

            string proc_name = action + "_" + invoice_type + "_Invoice_" + action_param;

            return proc_name;
        }

        public DataTable Create_Invoice_Id( int type, int id) {
            
            /**
             *
             * 0 => SALES
             * 1 => PURCHASE
             * 2 => RETURN PURCHASE
             * 3 => RETURN SALES
             *
             */
            string Proc_Name = this.get_proc_name( type, "Create", "Id" );


            DB.DataAccessLayer DAL = new DB.DataAccessLayer();

            DataTable table = new DataTable();

            SqlParameter[] param = new SqlParameter[1];

            param[0] = new SqlParameter("@id", SqlDbType.Int);
            param[0].Value = id;

            DAL.Open();

            table = DAL.SelectData(Proc_Name, param);

            DAL.Close();

            return table;

        }


        public void Update_Invoice_Details( DataTable table ) { 
            
        }


        public DataTable Get_Invoice_Details(int id)
        {
            DataTable table = new DataTable();

            DB.DataAccessLayer DAL = new DB.DataAccessLayer();

            SqlParameter[] param = new SqlParameter[1];

            param[0] = new SqlParameter("@invoice_id", SqlDbType.Int);
            param[0].Value = id;

            DAL.Open();
            
            table = DAL.SelectData("Get_Invoice_Details", param);

            DAL.Close();

            return table;
        }

        public DataTable[] Load_Invoice_Data( int InvoiceType = 0 ) {

            DataTable[] tables = new DataTable[2];

            DB.DataAccessLayer DAL = new DB.DataAccessLayer();
            string invoices = this.get_proc_name(InvoiceType, "Get", "Data");
            
            return tables;
        }

----------------------------------------------------------------------------

 PL.Invoice Invoice = new PL.Invoice();
        //DataTable[] tables;

        public Purchase()
        {
            InitializeComponent();
            //tables = Invoice.Load_Invoice_Data(1);
            //this.Load_Invoice_Data(table);
        }


        private void button7_Click(object sender, EventArgs e)
        {
            
            
            if (invoice_number.Text == "") {
                invoice_number.Text = "-1";
            }

            DataTable table = Invoice.Create_Invoice_Id(1, Convert.ToInt32(invoice_number.Text) );
            this.Load_Invoices(table);
            this.enable_invoice_element(false);

        }

        public void Load_Invoices( DataTable table ) {

            if (table.Rows.Count != 0) { 
                DataRow row = table.Rows[0];
                invoice_number.Text = row["id"].ToString();
            }
        }

        public void enable_invoice_element( bool isDisabled ) {

            details.Enabled = !isDisabled;
            payment_methods.Enabled = !isDisabled;
            enable_vat.Enabled = !isDisabled;
            invoice_number.Enabled = !isDisabled;
            datemade.Enabled = !isDisabled;
            invoice_detail_datagridview.Enabled = !isDisabled;
            total_without_vat.Enabled = !isDisabled;
            discount.Enabled = !isDisabled;
            vat_amount.Enabled = !isDisabled;
            total_with_vat.Enabled = !isDisabled;

        }

        private void button3_Click(object sender, EventArgs e)
        {
            this.enable_invoice_element(true);
        }

        private void show_Click(object sender, EventArgs e)
        {
            DataTable table = new DataTable();
            invoice_detail_datagridview.DataSource = Invoice.Get_Invoice_Details(Convert.ToInt32(invoice_number.Text));
        }