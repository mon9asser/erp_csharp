ALTER PROC [dbo].[Create_Purchase_Invoice_Id]

@id int

AS

DECLARE @MyCounter INT;
SET @MyCounter = ( SELECT COUNT(*) FROM [dbo].purchase_invoice ) + 1;

IF NOT EXISTS ( SELECT * FROM [dbo].purchase_invoice WHERE id = @id )
	BEGIN 
		
			
		INSERT INTO  [dbo].purchase_invoice(payment_method, total_without_vat, serial) VALUES(0, '', @MyCounter ) 
		
		SELECT TOP 1 * FROM  [dbo].purchase_invoice  WHERE [dbo].[purchase_invoice].date is null ORDER BY  [dbo].[purchase_invoice].id DESC ; 
	END
	 
	 SELECT TOP 1 * FROM  [dbo].purchase_invoice  WHERE [dbo].[purchase_invoice].date is null ORDER BY  [dbo].[purchase_invoice].id DESC ;  









---------------------------------------------------------------
invoice_id
invoice_serial
datemade
payment_methods
details
payment_condition
customer_id
customer_name

legend_id
legend_number
legend_name
cost_center_number
cost_center_id 
cost_center_name

items_datagridview

net_total
discount_value
dicount_percentage
discount_not_more_than
total_without_vat
price_includ_vat
vat_amount
total
total_label_text


search_button
add_new_button
save_button
first_record_button
next_button
previous_button
last_record_button
print
print_and_save_button
edit_button
delete_button